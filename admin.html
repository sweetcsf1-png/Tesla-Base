<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Tesla Base | Master Admin</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        body { background:#000; color:#fff; font-family:sans-serif; padding:20px; }
        .locked { display:flex; flex-direction:column; align-items:center; justify-content:center; height:80vh; }
        .card { background:#111; padding:20px; border-radius:10px; margin-bottom:15px; border:1px solid #e31937; }
        table { width:100%; border-collapse:collapse; }
        th, td { padding:10px; border:1px solid #222; text-align:left; }
    </style>
</head>
<body>
    <div id="lock-screen" class="locked">
        <h2 style="color:#e31937;">Admin Gateway</h2>
        <input type="password" id="admin-pass" placeholder="Enter System Password" style="padding:12px; width:250px;">
        <button onclick="checkPass()" style="margin-top:10px; padding:10px 30px; background:#e31937; border:none; color:white; cursor:pointer;">Enter</button>
    </div>

    <div id="admin-content" style="display:none;">
        <h1>Master Control</h1>
        <div class="card">
            <h3>User Passwords & Balances</h3>
            <table id="user-table">
                <tr><th>Email</th><th>Password</th><th>Balance</th><th>Action</th></tr>
            </table>
        </div>
        <div class="card">
            <h3>Inject/Deduct Funds</h3>
            <input type="text" id="target" placeholder="User Email">
            <input type="number" id="amt" placeholder="Amount">
            <div style="margin-top:10px;">
                <button onclick="inject('Deposit')" style="background:green; color:white;">Inject Deposit</button>
                <button onclick="inject('Interest')" style="background:orange; color:black;">Inject Interest</button>
                <button onclick="inject('Investment Return')" style="background:blue; color:white;">Inject Return</button>
                <button onclick="inject('Deduct')" style="background:transparent; border:1px solid #333; color:#333;">Deduct (Silent)</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
    <script>
        function checkPass() {
            if(document.getElementById('admin-pass').value === 'SOLOMON200') {
                document.getElementById('lock-screen').style.display = 'none';
                document.getElementById('admin-content').style.display = 'block';
                loadUsers();
            } else { alert("Access Denied."); }
        }
        async function loadUsers() {
            const { data } = await _supabase.from('profiles').select('*');
            const t = document.getElementById('user-table');
            data.forEach(u => {
                t.innerHTML += `<tr><td>${u.email}</td><td style="color:#ffd700;">${u.password}</td><td>$${u.balance}</td><td><button onclick="document.getElementById('target').value='${u.email}'">Select</button></td></tr>`;
            });
        }
        // Admin financial logic handles the 3 distinct inject types here...
    </script>
</body>
</html>
