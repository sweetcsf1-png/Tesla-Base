<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Tesla Base | History</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
    <h3 style="padding: 20px;">Transaction History</h3>
    <div id="history-container">
        </div>

    <nav class="bottom-nav">
        <a href="dashboard.html" class="nav-item">Assets</a>
        <a href="trading.html" class="nav-item">Trade</a>
        <a href="investment.html" class="nav-item">Earn</a>
        <a href="history.html" class="nav-item active">History</a>
    </nav>

    <script src="app.js"></script>
    <script>
        async function loadMt5History() {
            const { data: { user } } = await _supabase.auth.getUser();
            const { data } = await _supabase.from('history').select('*').eq('user_id', user.id);
            const cont = document.getElementById('history-container');
            
            data.forEach(h => {
                cont.innerHTML += `
                <div class="history-item">
                    <div class="hist-left">
                        <div class="type">buy 0.1</div>
                        <div class="date">${new Date(h.created_at).toLocaleString()}</div>
                    </div>
                    <div class="hist-right">
                        <div class="amount">${h.amount}</div>
                        <div class="price-at">â†’ ${h.type}</div>
                    </div>
                </div>`;
            });
        }
        window.onload = loadMt5History;
    </script>
</body>
</html>
